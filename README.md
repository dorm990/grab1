# Duck Business Game - Telegram Mini App

## üéÆ –û–ø–∏—Å–∞–Ω–∏–µ
Idle-–∏–≥—Ä–∞ –¥–ª—è Telegram —Å –±–∏–∑–Ω–µ—Å–∞–º–∏, –º–∞–≥–∞–∑–∏–Ω–æ–º, –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–æ–º –∏ –±–æ–∫—Å–∞–º–∏.

## ‚öôÔ∏è –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞—Ä–∞–±–æ—Ç–æ–∫ –æ—Ç –±–∏–∑–Ω–µ—Å–æ–≤ (4 —á–∞—Å–∞)
- ‚úÖ –ü–æ–∫—É–ø–∫–∞ –∏ —É–ª—É—á—à–µ–Ω–∏–µ –±–∏–∑–Ω–µ—Å–æ–≤
- ‚úÖ –ú–∞–≥–∞–∑–∏–Ω –ø—Ä–µ–¥–º–µ—Ç–æ–≤ (–º–∞—à–∏–Ω—ã, –∫–≤–∞—Ä—Ç–∏—Ä—ã, –¥—Ä—É–≥–æ–µ)
- ‚úÖ –ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å –¥–ª—è —Ç–æ—Ä–≥–æ–≤–ª–∏ –º–µ–∂–¥—É –∏–≥—Ä–æ–∫–∞–º–∏
- ‚úÖ –ë–æ–∫—Å—ã —Å –Ω–∞–≥—Ä–∞–¥–∞–º–∏
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö SQLite
- ‚úÖ –¢–∞–π–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã –±–∏–∑–Ω–µ—Å–æ–≤
- ‚úÖ –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
- ‚úÖ –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```bash
pip install -r requirements.txt
```

### 2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –±–æ—Ç–∞

–í —Ñ–∞–π–ª–µ `bot.py` —É–∂–µ —É–∫–∞–∑–∞–Ω –≤–∞—à —Ç–æ–∫–µ–Ω –±–æ—Ç–∞:
```python
BOT_TOKEN = "8302634702:AAELmL4jv_yx9jRcvbrGBGQBKD4rcbET4fI"
```

–í–∞–º –Ω—É–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å `WEBAPP_URL` –∏ `ADMIN_IDS`:
```python
WEBAPP_URL = "https://your-domain.com"  # –í–∞—à –¥–æ–º–µ–Ω/ngrok URL
ADMIN_IDS = [YOUR_TELEGRAM_ID]  # –í–∞—à Telegram ID
```

### 3. –ó–∞–ø—É—Å–∫

#### –í–∞—Ä–∏–∞–Ω—Ç 1: –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ —Å ngrok (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ ngrok: https://ngrok.com/download
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä:
```bash
python webapp.py
```

3. –í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –∑–∞–ø—É—Å—Ç–∏—Ç–µ ngrok:
```bash
ngrok http 5000
```

4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ HTTPS URL –∏–∑ ngrok (–Ω–∞–ø—Ä–∏–º–µ—Ä: https://abc123.ngrok.io)
5. –ó–∞–º–µ–Ω–∏—Ç–µ `WEBAPP_URL` –≤ bot.py –Ω–∞ —ç—Ç–æ—Ç URL
6. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:
```bash
python bot.py
```

#### –í–∞—Ä–∏–∞–Ω—Ç 2: –î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä

–î–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞ –Ω—É–∂–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å –¥–æ–º–µ–Ω–æ–º –∏ HTTPS:
- VPS (DigitalOcean, Hetzner, etc.)
- Nginx –∫–∞–∫ reverse proxy
- SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (Let's Encrypt)
- Systemd –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞

## üéØ –ö–∞–∫ –∏–≥—Ä–∞—Ç—å

1. –û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞: https://t.me/YOUR_BOT_NAME
2. –ù–∞–∂–º–∏—Ç–µ /start
3. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "üéÆ –ò–≥—Ä–∞—Ç—å"

### –ú–µ—Ö–∞–Ω–∏–∫–∞:
- **–ë–∏–∑–Ω–µ—Å—ã**: –ù–∞–∂–º–∏—Ç–µ "–ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É", –ø–æ–¥–æ–∂–¥–∏—Ç–µ 4 —á–∞—Å–∞, —Å–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–∏–±—ã–ª—å
- **–ú–∞–≥–∞–∑–∏–Ω**: –ü–æ–∫—É–ø–∞–π—Ç–µ –ø—Ä–µ–¥–º–µ—Ç—ã –∑–∞ –∏–≥—Ä–æ–≤—É—é –≤–∞–ª—é—Ç—É
- **–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å**: –ü—Ä–æ–¥–∞–≤–∞–π—Ç–µ —Å–≤–æ–∏ –ø—Ä–µ–¥–º–µ—Ç—ã –¥—Ä—É–≥–∏–º –∏–≥—Ä–æ–∫–∞–º
- **–ë–æ–∫—Å—ã**: –û—Ç–∫—Ä—ã–≤–∞–π—Ç–µ –±–æ–∫—Å—ã –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ª—É—á–∞–π–Ω—ã—Ö –Ω–∞–≥—Ä–∞–¥

## üîß –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

–ö–æ–º–∞–Ω–¥–∞ `/admin` (–¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è ID –∏–∑ ADMIN_IDS):
- üë• –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä–æ–∫–æ–≤
- üéÅ –í—ã–¥–∞—Ç—å –±–æ–Ω—É—Å
- üö´ –ó–∞–±–∞–Ω–∏—Ç—å –∏–≥—Ä–æ–∫–∞
- ‚úÖ –†–∞–∑–±–∞–Ω–∏—Ç—å –∏–≥—Ä–æ–∫–∞

## üí∞ –ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è (TODO)

–î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–ª–∞—Ç–µ–∂–µ–π –Ω—É–∂–Ω–æ:

### TON:
1. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å TON Connect
2. –°–æ–∑–¥–∞—Ç—å –∫–æ—à–µ–ª–µ–∫ –¥–ª—è –ø—Ä–∏–µ–º–∞ –ø–ª–∞—Ç–µ–∂–µ–π
3. –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø–ª–∞—Ç–µ–∂–µ–π –≤ webapp.py

### Telegram Stars:
1. –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –≤ @BotFather
2. –î–æ–±–∞–≤–∏—Ç—å –≤ bot.py:
```python
PROVIDER_TOKEN = "your_provider_token"
```
3. –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ PreCheckoutQuery –∏ SuccessfulPayment

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
duck_game_bot/
‚îú‚îÄ‚îÄ bot.py              # Telegram –±–æ—Ç
‚îú‚îÄ‚îÄ webapp.py           # Flask –≤–µ–±-—Å–µ—Ä–≤–µ—Ä + API
‚îú‚îÄ‚îÄ templates/
‚îÇ   ‚îî‚îÄ‚îÄ game.html       # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏–≥—Ä—ã
‚îú‚îÄ‚îÄ game.db             # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
‚îú‚îÄ‚îÄ requirements.txt    # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îî‚îÄ‚îÄ README.md          # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

SQLite –±–∞–∑–∞ —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏:
- `players` - –∏–≥—Ä–æ–∫–∏
- `player_businesses` - –±–∏–∑–Ω–µ—Å—ã –∏–≥—Ä–æ–∫–æ–≤
- `player_items` - –ø—Ä–µ–¥–º–µ—Ç—ã –∏–≥—Ä–æ–∫–æ–≤
- `marketplace` - –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å
- `transactions` - —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- `box_openings` - –æ—Ç–∫—Ä—ã—Ç–∏—è –±–æ–∫—Å–æ–≤

## ‚ö° API Endpoints

- `GET /api/player/<user_id>` - –¥–∞–Ω–Ω—ã–µ –∏–≥—Ä–æ–∫–∞
- `POST /api/business/start` - –∑–∞–ø—É—Å—Ç–∏—Ç—å –±–∏–∑–Ω–µ—Å
- `POST /api/business/claim` - —Å–æ–±—Ä–∞—Ç—å –ø—Ä–∏–±—ã–ª—å
- `POST /api/business/buy` - –∫—É–ø–∏—Ç—å –±–∏–∑–Ω–µ—Å
- `POST /api/item/buy` - –∫—É–ø–∏—Ç—å –ø—Ä–µ–¥–º–µ—Ç
- `GET /api/marketplace/list` - —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–¥–∞–∂
- `POST /api/marketplace/sell` - –ø—Ä–æ–¥–∞—Ç—å –ø—Ä–µ–¥–º–µ—Ç
- `POST /api/marketplace/buy` - –∫—É–ø–∏—Ç—å —Å –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞
- `POST /api/box/open` - –æ—Ç–∫—Ä—ã—Ç—å –±–æ–∫—Å
- `GET /api/config` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–≥—Ä—ã

## üé® –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è

### –ò–∑–º–µ–Ω–∏—Ç—å –±–∏–∑–Ω–µ—Å—ã:
–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `BUSINESSES` –≤ `webapp.py`:
```python
BUSINESSES = {
    1: {"name": "üè™ –ù–∞–∑–≤–∞–Ω–∏–µ", "price": 0, "income": 10, "time": 4},
    # ...
}
```

### –ò–∑–º–µ–Ω–∏—Ç—å –ø—Ä–µ–¥–º–µ—Ç—ã:
–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `ITEMS` –≤ `webapp.py`

### –ò–∑–º–µ–Ω–∏—Ç—å –±–æ–∫—Å—ã:
–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `BOXES` –≤ `webapp.py`

## üêõ Troubleshooting

**–û—à–∏–±–∫–∞ "Table not found":**
–£–¥–∞–ª–∏—Ç–µ `game.db` –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ - –±–∞–∑–∞ —Å–æ–∑–¥–∞—Å—Ç—Å—è –∑–∞–Ω–æ–≤–æ

**–ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –±–æ—Ç –∑–∞–ø—É—â–µ–Ω

**WebApp –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ WEBAPP_URL
- URL –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å HTTPS
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ Flask –∑–∞–ø—É—â–µ–Ω

## üìù TODO –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è

- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø–ª–∞—Ç–µ–∂–∏ TON/Stars
- [ ] –£–ª—É—á—à–µ–Ω–∏—è –±–∏–∑–Ω–µ—Å–æ–≤
- [ ] –ê—á–∏–≤–∫–∏ –∏ –ª–∏–¥–µ—Ä–±–æ—Ä–¥
- [ ] –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –±–æ–Ω—É—Å—ã
- [ ] –ó–∞–¥–∞–Ω–∏—è
- [ ] –î—Ä—É–∑—å—è –∏ –∫–ª–∞–Ω—ã
- [ ] –ë–æ–ª—å—à–µ –ø—Ä–µ–¥–º–µ—Ç–æ–≤
- [ ] –ê–Ω–∏–º–∞—Ü–∏–∏

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π –∏–ª–∏ –¥–æ—Ä–∞–±–æ—Ç–∫–æ–π - –ø–∏—à–∏—Ç–µ!
